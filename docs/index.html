<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RouterOS REST API Schemas and Docs</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Manrope:wght@200..800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --pico-font-family-sans-serif: Manrope, system-ui, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, Helvetica, Arial, "Helvetica Neue", sans-serif, var(--pico-font-family-emoji);
            --pico-font-family-monospace: "JetBrains Mono", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace, var(--pico-font-family-emoji);
            --pico-font-family: "JetBrains Mono", var(--pico-font-family-sans-serif);
        }
    </style>
</head>

<body>
    <main class="container">
        <section>
            <div>
                <div style="background-image: url(https://mikrotik.com/logo/assets/donot-bgpattern3-OTvv-Xcl.jpg)">
                    <img src="https://mikrotik.com/logo/assets/logo-colors-dark-ToiqSI6u.svg" />
                </div>
            </div>
        </section>
        <h3>Generated Schemas and Docs</h3>
            <div id="filelist-div">
                <table>
                    <thead>
                        <tr>
                            <th scope="col">Version</th>
                            <th scope="col"><mark>RAML</mark> Schema</th>
                            <th scope="col"><mark>HTML</mark> API Docs</th>
                            <th scope="col"><mark>JSON</mark> Inspect </th>
                        </tr>
                    </thead>
                    <tbody id="filerows">
                    </tbody>
                </table>
            </div>
    </main>
    <script>
        const owner = 'tikoci'
        const repo = 'restraml'
        const path = 'docs'
        const pagesUrl = `https://${owner}.github.io/${repo}/`

        fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`)
            .then(response => response.json())
            .then(data => {
                const fileList = document.getElementById("filerows")
                console.log(fileList)
                console.log(data)
                data.forEach(file => {
                    console.log(file)
                    if (file.type === "dir") {
                        const row = document.createElement('tr')

                        const col1 = document.createElement('th')
                        col1.textContent = file.name
                        row.appendChild(col1)

                        const col2 = document.createElement('td')
                        const raml = document.createElement('a')
                        raml.href = pagesUrl + file.path.replace('docs/', '') + '/schema.raml'
                        raml.textContent = "RAML"
                        col2.appendChild(raml)
                        row.appendChild(col2)

                        const col3 = document.createElement('td')
                        const html = document.createElement('a')
                        html.href = pagesUrl + file.path.replace('docs/', '') + '/docs'
                        html.textContent = "HTML"
                        col3.appendChild(html)
                        row.appendChild(col3)

                        const col4 = document.createElement('td')
                        const inspectjson = document.createElement('a')
                        inspectjson.href = pagesUrl + file.path.replace('docs/', '') + '/inspect.json'
                        inspectjson.textContent = "JSON"
                        col4.appendChild(inspectjson)
                        row.appendChild(col4)

                        fileList.appendChild(row)
                    }
                })
            })
            .catch(error => console.error('Error fetching files:', error))
    </script>
</body>

</html>